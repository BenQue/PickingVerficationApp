# **产品需求文档 (PRD): 拣配流程追溯与验证程序**

## **1\. 目标与背景 (Goals and Background Context)**

* **目标 (Goals)**  
  * **对于操作员:** 提供一个高效、准确、易用的 PDA 工具，替代易错的手工核对流程。  
  * **对于管理者:** 实现物料从拣配完成到送达产线前全流程的数字化追溯，提升管理效率，为流程优化提供数据支持。  
  * **对于生产:** 杜绝因物料错配、漏配导致的生产异常，保障产线物料供应的准时性和准确性。  
* **背景 (Background Context)**  
  * 本项目旨在解决当前仓库物料流转中，从拣配完成到产线交付之间存在的验证盲点。通过在“合箱校验”、“平台收料”、“产线送料”三个关键节点引入数字化扫描验证，将原先依赖人工经验的流程转变为可靠、可追溯的系统化流程。这将为后续的智能仓储和生产流程优化打下坚实的数据基础。  
* 文档变更日志 (Change Log)  
  | 日期 | 版本 | 描述 | 作者 |  
  | :--- | :--- | :--- | :--- |  
  | 2025-09-04 | 1.0 | 初始 PRD 草稿，定义了所有核心需求与史诗 | BMad-PM |

## **2\. 需求 (Requirements)**

**功能性需求 (Functional Requirements):**

1. **FR1 (用户认证与权限):** 应用必须提供一个安全的登录界面，通过员工ID和密码调用后台API进行认证。系统必须能根据不同用户的权限，决定其可访问的功能模块。  
2. **FR2 (任务看板):** 登录后，用户应能看到一个个人任务看板，其中包含后台根据其角色分配的所有未完成订单任务。  
3. **FR3 (任务列表分组):** 任务看板中的列表必须通过页签（Tabs）或可折叠分组的形式，将不同阶段的任务（如“合箱校验”、“平台收料”）清晰地分开展示。  
4. **FR4 (任务导航与强制扫描):** 用户点击任务项后，应用需导航至对应工作界面，并强制要求用户扫描物理订单的二维码进行二次确认，只有扫描的订单号与所选任务一致时才能继续操作。  
5. **FR5 (多模式导航):** 对于拥有多种功能权限的用户，必须提供一个清晰的主界面，允许用户选择进入“合箱校验”、“平台收料”或“产线送料”三种工作模式之一。对于单一权限用户，则应直接进入其唯一可用的工作界面。  
6. **FR6 (订单识别):** 在所有工作模式中，必须支持通过 PDA 摄像头扫描二维码来识别订单号，并提供一个备用的手动输入界面。  
7. **FR7 (物料清单与状态可视化):** 在“合箱校验”模式下，必须按“断线物料”、“中央仓物料”、“自动化库物料”分组展示清单，并使用醒目的“颜色+图标”组合来清晰区分五种物料状态。  
8. **FR8 (合箱校验逻辑):** 在“合箱校验”模式下，“提交校验”按钮仅在所有物料状态均为“已完成”时才可点击。  
9. **FR9 (收料平台前置校验):** 在“平台收料”模式下，扫描订单后，程序必须先验证该订单是否已“完成合箱校验”，通过后才允许提交。  
10. **FR10 (产线送料双重扫描):** 在“产线送料”模式下，程序必须要求用户先后扫描订单二维码和目标生产线位置二维码。  
11. **FR11 (API 数据提交):** 用户在各个模式下提交确认后，程序必须调用对应的后台 API（用户认证、任务列表、合箱校验、物料转移）并传递正确的参数。  
12. **FR12 (清晰的反馈与异常处理):** 所有操作（成功、失败、网络错误等）都必须向用户提供清晰、易懂的提示信息。

**非功能性需求 (Non-Functional Requirements):**

1. **NFR1 (平台与性能):** 应用必须使用 Flutter 开发，在工业级 Android 11 PDA 上流畅运行。核心操作响应时间应在 1 秒以内。  
2. **NFR2 (用户界面与易用性):** 界面设计必须遵循高对比度、大字体、大按钮的原则，以适应仓库环境和操作员可能佩戴手套的场景。  
3. **NFR3 (可靠性):** 应用必须能妥善处理网络不稳定的情况，并在网络恢复后能顺畅地继续工作。  
4. **NFR4 (安全性):** 所有与后台服务器的通信都必须通过 HTTPS 加密。应用需安全存储认证凭证，且不得在本地持久化存储任何敏感业务数据。

## **3\. 史诗与用户故事 (Epics & User Stories)**

### **史诗 1: 项目基础与登录认证**

**目标:** 搭建应用基础框架，并实现一个安全可靠的用户登录系统，为后续的权限控制和任务分配打下基础。

* **故事 1.1: 初始项目脚手架与设置**  
* **故事 1.2: 登录界面 UI**  
* **故事 1.3: 用户认证与权限管理**

### **史诗 2: “我的任务”清单**

**目标:** 为登录后的用户提供一个个人任务中心，清晰地展示分配给他们的、待完成的订单列表，实现从“人找事”到“事找人”的转变。

* **故事 2.1: 按类型分组的任务清单 UI 与 API 集成**  
* **故事 2.2: 从任务清单导航并强制扫描以验证物理操作**

### **史诗 3: 核心合箱校验流程**

**目标:** 完整交付核心的“合箱校验”功能，使操作员能够完全替代现有手工核对流程。

* **故事 3.1: 激活并进入合箱校验模式**  
* **故事 3.2: 扫描或手动输入订单以获取详情**  
* **故事 3.3: 可视化物料清单与状态**  
* **故事 3.4: 完成校验逻辑与提交**

### **史诗 4: 平台收料确认流程**

**目标:** 扩展应用功能，支持“平台收料”工作流，将物料交接的第一个关键节点纳入数字化管理。

* **故事 4.1: 激活并进入平台收料模式**  
* **故事 4.2: 扫描订单并验证其“合箱校验”状态**  
* **故事 4.3: 提交收料确认以更新货物位置**

### **史诗 5: 产线送料确认与流程闭环**

**目标:** 实现“产线送料确认”功能，完成从物料拣配到送达生产线前的完整流程闭环。

* **故事 5.1: 激活并进入产线送料模式**  
* **故事 5.2: 双重扫描以验证订单与位置**  
* **故事 5.3: 提交送料确认以完成最终转移**

*注意：每个用户故事的详细验收标准已在讨论中明确，此处为简略列表。*